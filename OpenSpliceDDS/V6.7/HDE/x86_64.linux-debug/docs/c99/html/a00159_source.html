<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>C99 OpenSplice Data Distribution Service Data-Centric Publish-Subscribe API: dcps/docs/DCPS_Modules_Subscription_SampleInfo.md Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="PROJECT_LOGO_OpenSplice.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">C99 OpenSplice Data Distribution Service Data-Centric Publish-Subscribe API
   &#160;<span id="projectnumber">v6.x</span>
   </div>
   <div id="projectbrief">C99 OpenSplice Data Distribution Service Data-Centric Publish-Subscribe API</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a00159.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">dcps/docs/DCPS_Modules_Subscription_SampleInfo.md</div>  </div>
</div><!--header-->
<div class="contents">
<a href="a00159.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;The SampleInfo      {#DCPS_Modules_Subscription_SampleInfo}</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;===============</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;The SampleInfo contains information pertaining to the associated Data value:</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;- The sample_state of the Data value (i.e., <span class="keywordflow">if</span> the sample has already been READ or NOT_READ by that same DataReader).</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;- The view_state of the related instance (i.e., <span class="keywordflow">if</span> the instance is NEW, or NOT_NEW <span class="keywordflow">for</span> that DataReader) – see below.</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;- The instance_state of the related instance (i.e., <span class="keywordflow">if</span> the instance is ALIVE, NOT_ALIVE_DISPOSED, or NOT_ALIVE_NO_WRITERS) – see below.</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;- The valid_data flag. This flag indicates whether there is data associated with the sample. Some samples <span class="keywordflow">do</span> not contain data indicating only a change on the instance_state of the corresponding instance – see below.</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;- The values of disposed_generation_count and no_writers_generation_count <span class="keywordflow">for</span> the related instance at the time the sample was received. These counters indicate the number of times the instance had become ALIVE (with instance_state= ALIVE) at the time the sample was received – see below.</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;- The sample_rank and generation_rank of the sample within the returned sequence. These ranks provide a preview of the samples that follow within the sequence returned by the read or take operations.</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;- The absolute_generation_rank of the sample within the DataReader. This rank provides a preview of what is available within the DataReader.</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;- The source_timestamp of the sample. This is the timestamp provided by the DataWriter at the time the sample was produced.</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">### Interpretation of the SampleInfo instance_state</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;For each instance the middleware internally maintains an instance_state. The instance_state can be ALIVE, NOT_ALIVE_DISPOSED, or NOT_ALIVE_NO_WRITERS.</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;- ALIVE indicates that (a) samples have been received for the instance, (b) there are live DataWriter entities writing the instance, and (c) the instance has not been explicitly disposed (or else more samples have been received after it was</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;disposed).</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;- NOT_ALIVE_DISPOSED indicates the instance was explicitly disposed by a DataWriter by means of the dispose operation.</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;- NOT_ALIVE_NO_WRITERS indicates the instance has been declared as not-alive by the DataReader because it detected that there are no live DataWriter entities writing that instance.</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;The precise behavior events that cause the instance_state to change depends on the setting of the OWNERSHIP QoS:</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;- If OWNERSHIP is set to EXCLUSIVE, then the instance_state becomes NOT_ALIVE_DISPOSED only if the DataWriter that “owns” the instance16 explicitly disposes it. The instance_state becomes ALIVE again only if the DataWriter that owns the instance writes it.</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;- If OWNERSHIP is set to SHARED, then the instance_state becomes NOT_ALIVE_DISPOSED if any DataWriter explicitly disposes the instance. The instance_state becomes ALIVE as soon as any DataWriter writes the instance again.</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;The instance_state available in the SampleInfo is a snapshot of the instance_state of the instance at the time the collection was obtained (i.e., at the time read or take was called). The instance_state is therefore the same for all samples in the returned collection that refer to the same instance.</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">### Interpretation of the SampleInfo valid_data</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;Normally each DataSample contains both a SampleInfo and some Data. However there are situations where a DataSample contains only the SampleInfo and does not have any associated data. This occurs when the Service notifies the application of a change of state <span class="keywordflow">for</span> an instance that was caused by some <span class="keyword">internal</span> mechanism (such as a timeout) <span class="keywordflow">for</span> which there is no associated data. An example of <span class="keyword">this</span> situation is when the Service detects that an instance has no writers and changes the corresponding instance_state to NOT_ALIVE_NO_WRITERS.</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;The actual set of scenarios under which the middleware returns DataSamples containing no Data is implementation dependent. The application can distinguish whether a particular DataSample has data by examining the value of the valid_data flag. If <span class="keyword">this</span> flag is set to TRUE, then the DataSample contains valid Data. If the flag is set to FALSE, the DataSample contains no Data.</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;To ensure correctness and portability, the valid_data flag must be examined by the application prior to accessing the Data associated with the DataSample and <span class="keywordflow">if</span> the flag is set to FALSE, the application should not access the Data associated with the DataSample, that is, the application should access only the SampleInfo.</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;### Interpretation of the SampleInfo disposed_generation_count and no_writers_generation_count</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;For each instance the middleware internally maintains two counts: the disposed_generation_count and</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;no_writers_generation_count, relative to each DataReader:</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;- The disposed_generation_count and no_writers_generation_count are initialized to zero when the DataReader first detects the presence of a never-seen-before instance.</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;- The disposed_generation_count is incremented each time the instance_state of the corresponding instance changes from NOT_ALIVE_DISPOSED to ALIVE.</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;- The no_writers_generation_count is incremented each time the instance_state of the corresponding instance changes from NOT_ALIVE_NO_WRITERS to ALIVE.</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;The disposed_generation_count and no_writers_generation_count available in the SampleInfo capture a snapshot of the corresponding counters at the time the sample was received.</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;### Interpretation of the SampleInfo sample_rank, generation_rank, and absolute_generation_rank</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;The sample_rank and generation_rank available in the SampleInfo are computed based solely on the actual samples in the ordered collection returned by read or take.</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;- The sample_rank indicates the number of samples of the same instance that follow the current one in the collection.</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;- The generation_rank available in the SampleInfo indicates the difference in ‘generations’ between the sample (S) and the **M** ost **R** ecent **S** ample of the same instance that appears **I** n the returned **C** ollection ( **MRSIC** ). That is, it counts the number of times the instance transitioned from not-alive to alive in the time from the reception of the S to the reception of MRSIC.</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;The generation_rank is computed using the formula:</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;*generation_rank = (MRSIC.disposed_generation_count + MRSIC.no_writers_generation_count) - (S.disposed_generation_count + S.no_writers_generation_count)*</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;The absolute_generation_rank available in the SampleInfo indicates the difference in ‘generations’ between the sample (S) and the Most Recent Sample of the same instance that the middleware has received (MRS). That is, it counts the number of times the instance transitioned from not-alive to alive in the time from the reception of the S to the time when the read or take was called.</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;*absolute_generation_rank = (MRS.disposed_generation_count + MRS.no_writers_generation_count) - (S.disposed_generation_count + S.no_writers_generation_count)*</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">### Interpretation of the SampleInfo counters and ranks</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;These counters and ranks allow the application to distinguish samples belonging to different ‘generations’ of the instance. Note that it is possible <span class="keywordflow">for</span> an instance to transition from not-alive to alive (and back) several times before the application accesses the data by means of read or take. In <span class="keyword">this</span> <span class="keywordflow">case</span> the returned collection may contain samples that cross generations (i.e., some samples were received before the instance became not-alive, others after the instance reappeared again).</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;Using the information in the SampleInfo the application can anticipate what other information regarding the same instance appears in the returned collection, as well as, in the infrastructure and thus make appropriate decisions. For example, an application desiring to only consider the most current sample <span class="keywordflow">for each</span> instance would only look at samples with sample_rank==0. Similarly an application desiring to only consider samples that correspond to the latest generation in the collection will only look at samples with generation_rank==0. An application desiring only samples pertaining to the latest generation available will ignore samples <span class="keywordflow">for</span> which absolute_generation_rank != 0. Other application-defined criteria may also be used.</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;### Interpretation of the SampleInfo view_state</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;For each instance (identified by the key), the middleware internally maintains a view_state relative to each DataReader.</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;The view_state can either be NEW or NOT_NEW.</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;-  NEW indicates that either <span class="keyword">this</span> is the first time that the DataReader has ever accessed samples of that instance, or <span class="keywordflow">else</span> that the DataReader has accessed previous samples of the instance, but the instance has since been reborn (i.e., become not-alive and then alive again). These two cases are distinguished by examining the disposed_generation_count and the no_writers_generation_count.</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;- NOT_NEW indicates that the DataReader has already accessed samples of the same instance and that the instance has not been reborn since.</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;The view_state available in the SampleInfo is a snapshot of the view_state of the instance relative to the DataReader used to access the samples at the time the collection was obtained (i.e., at the time read or take was called). The view_state is therefore the same <span class="keywordflow">for</span> all samples in the returned collection that refer to the same instance.</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;Once an instance has been detected as not having any “live” writers and all the samples associated with the instance are ‘taken’ from the DataReader, the middleware can reclaim all local resources regarding the instance. Future samples will be treated as ‘never seen’.</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;![Statechart of the instance_state and view_state <span class="keywordflow">for</span> a single instance] (@ref SubscriptionModule_SampleInfo_InstanceState_UML.png)</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;### Data access patterns</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;The application accesses data by means of the operations read or take on the DataReader. These operations <span class="keywordflow">return</span> an ordered collection of DataSamples consisting of a SampleInfo part and a Data part. The way the middleware builds <span class="keyword">this</span> collection depends on QoS policies set on the DataReader and Subscriber, as well as the source timestamp of the samples, and the parameters passed to the read/take operations, namely:</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;- The desired sample states (i.e., READ, NOT_READ, or both).</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;- The desired view states (i.e., NEW, NOT_NEW, or both).</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;- The desired instance states (ALIVE, NOT_ALIVE_DISPOSED, NOT_ALIVE_NO_WRITERS, or a combination of these).</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;The read and take operations are non-blocking and just deliver what is currently available that matches the specified states.</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;The read_w_condition and take_w_condition operations take a ReadCondition <span class="keywordtype">object</span> as a parameter instead of sample, view, and instance states. The behavior is that the samples returned will only be those <span class="keywordflow">for</span> which the condition is TRUE. These operations, in conjunction with ReadCondition objects and a WaitSet, allow performing waiting reads (see below).</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;Once the data samples are available to the data readers, they can be read or taken by the application. The basic rule is that the application may <span class="keywordflow">do</span> <span class="keyword">this</span> in any order it wishes. This approach is very flexible and allows the application ultimate control. However, the application must use a specific access pattern in <span class="keywordflow">case</span> it needs to retrieve samples in the proper order received, or it wants to access a complete set of coherent changes.</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;To access data coherently, or in order, the PRESENTATION QoS on must be set properly and the application must conform to the access pattern described below. Otherwise, the application will still access the data but will not necessarily see all coherent changes together, nor will it see the changes in the proper order.</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;There is a general pattern that will provide both ordered and coherent access across multiple DataReaders. This pattern will work <span class="keywordflow">for</span> any settings of the PRESENTATION QoS. Simpler patterns may also work <span class="keywordflow">for</span> specific settings of the QoS as described below.</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;1 . General pattern to access samples as a coherent set and/or in order across DataReader entities. This <span class="keywordflow">case</span> applies when PRESENTATION QoS specifies “access_scope=GROUP.”</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;- Upon notification to the SubscriberListener or following the similar StatusCondition enabled, the application uses begin_access on the Subscriber to indicate it will be accessing data through the Subscriber.</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    - Then it calls get_datareaders on the Subscriber to <span class="keyword">get</span> the list of DataReader objects where data samples are available.</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    - Following <span class="keyword">this</span> it calls read or take on each DataReader in the same order returned to access all the relevant changes in the DataReader.</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    - Once it has called read or take on all the readers, it calls end_access.</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;Note that <span class="keywordflow">if</span> the PRESENTATION QoS policy specifies ordered_access=TRUE, then the list of DataReaders may <span class="keywordflow">return</span> the same reader several times. In <span class="keyword">this</span> manner the correct sample order can be maintained among samples in different DataReader objects.</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;2 . Specialized pattern <span class="keywordflow">if</span> no order or coherence needs to be maintained across DataReader entities.This <span class="keywordflow">case</span> applies <span class="keywordflow">if</span> PRESENTATION QoS policy specifies access_scope something other than GROUP.</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    - In <span class="keyword">this</span> <span class="keywordflow">case</span>, it is not required <span class="keywordflow">for</span> the application to call begin_access and end_access. However, doing so is not an error and it will have no effect.</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    - The application accesses the data by calling read or take on each DataReader in any order it wishes.</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    - The application can still call get_datareaders to determine which readers have data to be read, but it does not need to read all of them, nor read them in a particular order. Furthermore, the <span class="keywordflow">return</span> of get_datareaders will be logically a “set” in the sense that the same reader will not appear twice, and the order of the readers returned is not specified.</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;3 . Specialized pattern <span class="keywordflow">if</span> the application accesses the data within the SubscriberListener. This <span class="keywordflow">case</span> applies regardless of the PRESENTATION QoS policy when the application accesses the data inside the listener’s implementation of the on_data_on_readers operation.</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    - Similar to the previous <span class="keywordflow">case</span> (2 above), it is not required <span class="keywordflow">for</span> the application to call begin_access and end_access, but doing so has no effect.</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    - The application can access data by calling read or take20 on each DataReader in any order it wishes.</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    - The application can also delegate the accessing of the data to the DataReaderListener objects installed on each DataReader by calling notify_datareaders.</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    - Similar to the previous <span class="keywordflow">case</span> (2 above), the application can still call get_datareaders to determine which readers have data to be read, but it does not need to read all of them, nor read them in a particular order. Furthermore, the <span class="keywordflow">return</span> of get_datareaders will be logically a ‘set.’</div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="a00159.html">DCPS_Modules_Subscription_SampleInfo.md</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
