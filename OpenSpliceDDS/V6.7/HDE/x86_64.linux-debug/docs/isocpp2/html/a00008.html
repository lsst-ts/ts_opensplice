<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>OpenSplice ISO C++ 2 DCPS: ISO C++ API Library Recompilation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="PROJECT_LOGO_OpenSplice.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">OpenSplice ISO C++ 2 DCPS
   &#160;<span id="projectnumber">v6.x</span>
   </div>
   <div id="projectbrief">ISO C++ 2 OpenSplice Data Distribution Service Data-Centric Publish-Subscribe API</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a00008.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">ISO C++ API Library Recompilation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#isocpp2_customlibs_general">Rebuilding the API                                                              </a><ul><li class="level2"><a href="#isocpp2_customlibs_gcc">GCC Re-compilation                                                              </a></li>
<li class="level2"><a href="#isocpp2_customlibs_vs">Visual Studio Re-compilation                                                    </a></li>
<li class="level2"><a href="#isocpp2_customlibsdebug_vs">Visual Studio re-compilation for debug                                          </a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="isocpp2_customlibs_general"></a>
Rebuilding the API                                                              </h1>
<p>To overide the default configurations the API should be re-compiled with one of the macros OSPL_USE_CXX11, OSPL_USE_TR1, or OSPL_USE_BOOST defined.</p>
<p>The file dds/core/detail/macros.hpp could be edited directly to do this, or these can be defined on the compile command line.</p>
<h2><a class="anchor" id="isocpp2_customlibs_gcc"></a>
GCC Re-compilation                                                              </h2>
<p>Makefiles are provided that will re-build the DCPS API libraries <em>as is</em> with the compiler currently on your search path. These are found in <code>$OSPL_HOME/custom_lib</code>. They can be edited to suit your requirements if necessary. To rebuild the ISO C++ API you might then do, for example: </p>
<pre class="fragment">make -C $OSPL_HOME/custom_lib -f Makefile.Build_DCPS_ISO_Cpp2_Lib
</pre><h2><a class="anchor" id="isocpp2_customlibs_vs"></a>
Visual Studio Re-compilation                                                    </h2>
<p>A Visual Studio solution file <code>%OSPL_HOME%\custom_lib\custom_lib.sln</code> is provided. To rebuild to use <a href="http://www.boost.org/" title="Boost">Boost</a> you should (optionally) edit the project properties to specify OSPL_USE_BOOST during compilation, set the environment variable <code>BOOST_ROOT</code> to point to your <a href="http://www.boost.org/" title="Boost">Boost</a> installation, and launch Visual Studio - e.g: </p>
<pre class="fragment">devenv /useenv custom_lib.sln
</pre><p>The ISO C++ API library can then be re-built.</p>
<h2><a class="anchor" id="isocpp2_customlibsdebug_vs"></a>
Visual Studio re-compilation for debug                                          </h2>
<p>On Windows platforms, memory allocations are potentially different in release and debug mode and there can be issues when mixing the Release and Debug configurations across the application and API boundary. The application and OpenSplice ISO C++ API code need to be compiled for the same configuration in order to guarantee comparability across that boundary. To build a Debug version of the OpenSplice ISO C++ API, take the following steps:</p>
<ol type="1">
<li>If the OSPL_HOME variables are set at the system level you can just open the <code>custom_lib\Build_DCPS_ISO_Cpp2_Lib</code> project in Visual Studio (otherwise you'd need to run Visual Studio from a command prompt where the variables were set)</li>
<li>Create a new Debug configuration of the ISO C++ custom lib by cloning the existing Release configuration (to have all of those settings)<ul>
<li>Name it <code>Debug</code></li>
<li>C/C++ -&gt; Preprocessor -&gt; Add _DEBUG (as well as leaving NDEBUG set)</li>
<li>C/C++ -&gt; Code Generation -&gt; set Multi-threaded Debug DLL instead of Multi Threaded Debug DLL</li>
</ul>
</li>
<li>Optional to allow you to build a debug lib/dll without overwriting the existing release one<ul>
<li>General -&gt; TargetName -&gt; dcpsisocpp2d</li>
<li>General -&gt; Intermediate directory -&gt; Debug\</li>
<li>Linker -&gt; General -&gt; OutputFile -&gt; dcpsisocpp2d.dll</li>
<li>Linker -&gt; Advanced -&gt; Import Library -&gt; ...lib</li>
</ul>
</li>
<li>Rebuild All </li>
</ol>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="a00009.html">ISO/IEC C++ DCPS API</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
