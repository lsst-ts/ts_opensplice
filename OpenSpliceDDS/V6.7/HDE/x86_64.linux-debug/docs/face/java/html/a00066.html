<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>OpenSplice Java FACE API: QoS Provider</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="PROJECT_LOGO_OpenSplice.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">OpenSplice Java FACE API
   &#160;<span id="projectnumber">v6.x</span>
   </div>
   <div id="projectbrief">OpenSplice Future Airborne Capability Environment (FACE) Java API</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a00066.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">QoS Provider </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#DCPS_QoS_Provider_APIref">API reference       </a><ul><li class="level2"><a href="#DCPS_QoS_Provider_Introduction">Introduction           </a></li>
</ul>
</li>
<li class="level1"><a href="#DCPS_QoS_Provider_XMLsyn">XML file syntax       </a><ul><li class="level2"><a href="#DCPS_QoS_Provider_Entity_QoS">Entity QoS      </a></li>
<li class="level2"><a href="#DCPS_QoS_Provider_QoS_Profiles">QoS Profiles        </a></li>
</ul>
</li>
<li class="level1"><a href="#DCPS_QoS_Provider_Example">Example     </a></li>
<li class="level1"><a href="#DCPS_QoS_Provider_Limitations">Known limitations       </a></li>
</ul>
</div>
<div class="textblock"><p>This page provides information on using the QoS provider API of OpenSpliceDDS. The QoS provider API allows users to specify the QoS settings of their DCPS entities outside of application code in XML. This can be seen as a useful feature where code recompilation is restricted during the later stages of application development / during application support. The following sections explain the API in a language independent manner and explain how to build QoS Profiles in XML.</p>
<h1><a class="anchor" id="DCPS_QoS_Provider_APIref"></a>
API reference       </h1>
<h2><a class="anchor" id="DCPS_QoS_Provider_Introduction"></a>
Introduction           </h2>
<p>The QosProvider is delivered as part of the DCPS API of OpenSpliceDDS and has no factory. It is created as an object directly by the natural means in each language binding. This is because it is not necessarily associated with a single DomainParticipant. Below you'll find a link to the available operations, which are explained in detail there.</p>
<h1><a class="anchor" id="DCPS_QoS_Provider_XMLsyn"></a>
XML file syntax       </h1>
<p>The XML configuration file must follow these syntax rules:</p>
<ul>
<li>The syntax is XML and the character encoding is UTF-8.</li>
<li>Opening tags are enclosed in <code>&lt;&gt;</code>; closing tags are enclosed in <code>&lt;/&gt;</code>.</li>
<li>A value is a UTF-8 encoded string. Legal values are alphanumeric characters.</li>
<li>All values are case-sensitive unless otherwise stated.</li>
<li>Comments are enclosed as follows: &lt;!&ndash; comment &ndash;&gt;.</li>
<li>The root tag of the configuration file must be and end with .</li>
</ul>
<p>Please also see: <a href="http://www.omg.org/spec/dds4ccm/1.1/">OMG DDS4CCM</a> specification for more details on the exact notation.</p>
<p>The primitive types for tag values are specified in the following table:</p>
<table class="doxtable">
<tr>
<th>Type </th><th>Format </th><th>Notes  </th></tr>
<tr>
<td>Boolean </td><td>yes, 1, true or BOOLEAN_TRUE </td><td>Not case-sensitive </td></tr>
<tr>
<td></td><td>no, 0, false or BOOLEAN_FALSE </td><td></td></tr>
<tr>
<td>Enum </td><td>A string. Legal values are the ones defined for QoS Policies in the DCPS IDL of DDS specification. </td><td>Must be specified as a string. (Do not use numeric values.) </td></tr>
<tr>
<td>Long </td><td>-2147483648 to 2147483647 or 0x80000000 to 0x7fffffff or LENGTH_UNLIMITED </td><td>A 32-bit signed integer </td></tr>
<tr>
<td>UnsignedLong </td><td>0 to 4294967296 or 0 to 0xffffffff </td><td>A 32-bit unsigned integer </td></tr>
</table>
<h2><a class="anchor" id="DCPS_QoS_Provider_Entity_QoS"></a>
Entity QoS      </h2>
<p>To configure the QoS for a DDS Entity using XML, the following tags have to be used:</p>
<ul>
<li><code>&lt;domainparticipant_qos&gt;</code></li>
<li><code>&lt;publisher_qos&gt;</code></li>
<li><code>&lt;subscriber_qos&gt;</code></li>
<li><code>&lt;topic_qos&gt;</code></li>
<li><code>&lt;datawriter_qos&gt;</code></li>
<li><code>&lt;datareader_qos&gt;</code></li>
</ul>
<p>Each XML tag with an associated name can be uniquely identified by its fully qualified name in C++ style.</p>
<h3>QoS Policies</h3>
<p>The fields in a QosPolicy are described in XML using a 1-to-1 mapping with the equivalent IDL representation in the DDS specification. For example, the Reliability QosPolicy is represented with the following structures: </p>
<div class="fragment"><div class="line"><span class="keyword">struct </span>Duration_t {</div>
<div class="line">    <span class="keywordtype">long</span> sec;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> nanosec;</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="keyword">struct </span>ReliabilityQosPolicy {</div>
<div class="line">    ReliabilityQosPolicyKind kind;</div>
<div class="line">    Duration_t max_blocking_time;</div>
<div class="line">};</div>
</div><!-- fragment --><p> The equivalent representation in XML is as follows: </p>
<div class="fragment"><div class="line">&lt;reliability&gt;</div>
<div class="line">    &lt;kind&gt;&lt;/kind&gt;</div>
<div class="line">    &lt;max_blocking_time&gt;</div>
<div class="line">        &lt;sec&gt;&lt;/sec&gt;</div>
<div class="line">        &lt;nanosec&gt;&lt;/nanosec&gt;</div>
<div class="line">    &lt;/max_blocking_time&gt;</div>
<div class="line">&lt;/reliability&gt;</div>
</div><!-- fragment --><h3>Sequences</h3>
<p>In general, the sequences contained in the QoS policies are described with the following XML format: </p>
<div class="fragment"><div class="line">&lt;a_sequence_member_name&gt;</div>
<div class="line">    &lt;element&gt;...&lt;/element&gt;</div>
<div class="line">    &lt;element&gt;...&lt;/element&gt;</div>
<div class="line">    ...</div>
<div class="line">&lt;/a_sequence_member_name&gt;</div>
</div><!-- fragment --><p> Each element of the sequence is enclosed in an <code>&lt;element&gt;</code> tag., as shown in the following example: </p>
<div class="fragment"><div class="line">&lt;<span class="keyword">property</span>&gt;</div>
<div class="line">    &lt;value&gt;</div>
<div class="line">        &lt;element&gt;</div>
<div class="line">            &lt;name&gt;my name&lt;/name&gt;</div>
<div class="line">            &lt;value&gt;my value&lt;/value&gt;</div>
<div class="line">        &lt;/element&gt;</div>
<div class="line">        &lt;element&gt;</div>
<div class="line">            &lt;name&gt;my name2&lt;/name&gt;</div>
<div class="line">            &lt;value&gt;my value2&lt;/value&gt;</div>
<div class="line">        &lt;/element&gt;</div>
<div class="line">    &lt;/value&gt;</div>
<div class="line">&lt;/<span class="keyword">property</span>&gt;</div>
</div><!-- fragment --><p>A sequence without elements represents a sequence of length 0. For example: <code>&lt;a_sequence_member_name/&gt;</code> As a special case, sequences of octets are represented with a single XML tag enclosing a sequence of decimal/hexadecimal values between 0..255 separated with commas. For example: </p>
<div class="fragment"><div class="line">&lt;user_data&gt;</div>
<div class="line">    &lt;value&gt;100,200,0,0,0,223&lt;/value&gt;</div>
<div class="line">&lt;/user_data&gt;</div>
<div class="line">&lt;topic_data&gt;</div>
<div class="line">    &lt;value&gt;0xff,0x00,0x8e,0xEE,0x78&lt;/value&gt;</div>
<div class="line">&lt;/topic_data&gt;</div>
</div><!-- fragment --> <h3>Arrays</h3>
<p>In general, the arrays contained in the QoS policies are described with the following XML format: </p>
<div class="fragment"><div class="line">&lt;an_array_member_name&gt;</div>
<div class="line">    &lt;element&gt;...&lt;/element&gt;</div>
<div class="line">    &lt;element&gt;...&lt;/element&gt;</div>
<div class="line">    ...</div>
<div class="line">&lt;/an_array_member_name&gt;</div>
</div><!-- fragment --><p> Each element of the array is enclosed in an <code>&lt;element&gt;</code> tag. As a special case, arrays of octets are represented with a single XML tag enclosing an array of decimal/hexadecimal values between 0..255 separated with commas. For example: </p>
<div class="fragment"><div class="line">&lt;datareader_qos&gt;</div>
<div class="line">    ...</div>
<div class="line">    &lt;user_data&gt;</div>
<div class="line">        &lt;value&gt;100,200,0,0,0,223&lt;/value&gt;</div>
<div class="line">    &lt;/user_data&gt;</div>
<div class="line">&lt;/datareader_qos&gt;</div>
</div><!-- fragment --> <h3>Enumerations</h3>
<p>Enumeration values are represented using their IDL string representation. For example: </p>
<div class="fragment"><div class="line">&lt;history&gt;</div>
<div class="line">    &lt;kind&gt;KEEP_ALL_HISTORY_QOS&lt;/kind&gt;</div>
<div class="line">&lt;/history&gt;</div>
</div><!-- fragment --><h3>Time values (Durations)</h3>
<p>Following values can be used for fields that require seconds or nanoseconds:</p>
<ul>
<li>DURATION_INFINITE_SEC</li>
<li>DURATION_ZERO_SEC</li>
<li>DURATION_INFINITE_NSEC</li>
<li>DURATION_ZERO_NSEC</li>
</ul>
<p>The following example shows the use of time values: </p>
<div class="fragment"><div class="line">&lt;deadline&gt;</div>
<div class="line">    &lt;period&gt;</div>
<div class="line">        &lt;sec&gt;DURATION_INFINITE_SEC&lt;/sec&gt;</div>
<div class="line">        &lt;nanosec&gt;DURATION_INFINITE_NSEC&lt;/nanosec&gt;</div>
<div class="line">    &lt;/period&gt;</div>
<div class="line">&lt;/deadline&gt;</div>
</div><!-- fragment --><h2><a class="anchor" id="DCPS_QoS_Provider_QoS_Profiles"></a>
QoS Profiles        </h2>
<p>A QoS profile groups a set of related QoS, usually one per entity. For example: </p>
<div class="fragment"><div class="line">&lt;qos_profile name=<span class="stringliteral">&quot;StrictReliableCommunicationProfile&quot;</span>&gt;</div>
<div class="line">    &lt;datawriter_qos&gt;</div>
<div class="line">        &lt;history&gt;</div>
<div class="line">            &lt;kind&gt;KEEP_ALL_HISTORY_QOS&lt;/kind&gt;</div>
<div class="line">        &lt;/history&gt;</div>
<div class="line">        &lt;reliability&gt;</div>
<div class="line">            &lt;kind&gt;RELIABLE_RELIABILITY_QOS&lt;/kind&gt;</div>
<div class="line">        &lt;/reliability&gt;</div>
<div class="line">    &lt;/datawriter_qos&gt;</div>
<div class="line">    &lt;datareader_qos&gt;</div>
<div class="line">        &lt;history&gt;</div>
<div class="line">            &lt;kind&gt;KEEP_ALL_HISTORY_QOS&lt;/kind&gt;</div>
<div class="line">        &lt;/history&gt;</div>
<div class="line">        &lt;reliability&gt;</div>
<div class="line">            &lt;kind&gt;RELIABLE_RELIABILITY_QOS&lt;/kind&gt;</div>
<div class="line">        &lt;/reliability&gt;</div>
<div class="line">    &lt;/datareader_qos&gt;</div>
<div class="line">&lt;/qos_profile&gt;</div>
</div><!-- fragment --><p> QoS Profiles with a Single QoS</p>
<p>The definition of an individual QoS is a shortcut for defining a QoS profile with a single QoS. For example: </p>
<div class="fragment"><div class="line">&lt;datawriter_qos name=<span class="stringliteral">&quot;KeepAllWriter&quot;</span>&gt;</div>
<div class="line">    &lt;history&gt;</div>
<div class="line">        &lt;kind&gt;KEEP_ALL_HISTORY_QOS&lt;/kind&gt;</div>
<div class="line">    &lt;/history&gt;</div>
<div class="line">&lt;/datawriter_qos&gt;</div>
</div><!-- fragment --><p> is equivalent to the following: </p>
<div class="fragment"><div class="line">&lt;qos_profile name=<span class="stringliteral">&quot;KeepAllWriter&quot;</span>&gt;</div>
<div class="line">    &lt;datawriter_qos &gt;</div>
<div class="line">        &lt;history&gt;</div>
<div class="line">            &lt;kind&gt;KEEP_ALL_HISTORY_QOS&lt;/kind&gt;</div>
<div class="line">        &lt;/history&gt;</div>
<div class="line">    &lt;/datawriter_qos &gt;</div>
<div class="line">&lt;/qos_profile&gt;</div>
</div><!-- fragment --><h1><a class="anchor" id="DCPS_QoS_Provider_Example"></a>
Example     </h1>
<p>consider the following XML file that describes two QoS profiles;</p>
<ul>
<li>FooQosProfile<ul>
<li>DataReaderQos - TransientKeepLast</li>
<li>DataWriterQos - Transient</li>
</ul>
</li>
<li>BarQosProfile<ul>
<li>DataWriterQos - Persistent <div class="fragment"><div class="line">&lt;dds xmlns=<span class="stringliteral">&quot;http://www.omg.org/dds/&quot;</span></div>
<div class="line">        xmlns:xsi=<span class="stringliteral">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></div>
<div class="line">        xsi:schemaLocation=<span class="stringliteral">&quot;file://DDS_QoSProfile.xsd&quot;</span>&gt;</div>
<div class="line">    &lt;qos_profile name=<span class="stringliteral">&quot;FooQosProfile&quot;</span>&gt;</div>
<div class="line">        &lt;datareader_qos name=<span class="stringliteral">&quot;TransientKeepLast&quot;</span>&gt;</div>
<div class="line">            &lt;durability&gt;</div>
<div class="line">                &lt;kind&gt;TRANSIENT_DURABILITY_QOS&lt;/kind&gt;</div>
<div class="line">            &lt;/durability&gt;</div>
<div class="line">            &lt;history&gt;</div>
<div class="line">               &lt;kind&gt;KEEP_LAST_HISTORY_QOS&lt;/kind&gt;</div>
<div class="line">               &lt;depth&gt;5&lt;/depth&gt;</div>
<div class="line">            &lt;/history&gt;</div>
<div class="line">        &lt;/datareader_qos&gt;</div>
<div class="line">        &lt;datawriter_qos name=<span class="stringliteral">&quot;Transient&quot;</span>&gt;</div>
<div class="line">            &lt;durability&gt;</div>
<div class="line">                &lt;kind&gt;TRANSIENT_DURABILITY_QOS&lt;/kind&gt;</div>
<div class="line">            &lt;/durability&gt;</div>
<div class="line">        &lt;/datawriter_qos&gt;</div>
<div class="line">    &lt;/qos_profile&gt;</div>
<div class="line">    &lt;qos_profile name=<span class="stringliteral">&quot;BarQosProfile&quot;</span>&gt;</div>
<div class="line">        &lt;datawriter_qos name=<span class="stringliteral">&quot;Persistent&quot;</span>&gt;</div>
<div class="line">            &lt;durability&gt;</div>
<div class="line">                &lt;kind&gt;PERSISTENT_DURABILITY_QOS&lt;/kind&gt;</div>
<div class="line">            &lt;/durability&gt;</div>
<div class="line">        &lt;/datawriter_qos&gt;</div>
<div class="line">    &lt;/qos_profile&gt;</div>
<div class="line">&lt;/dds&gt;</div>
</div><!-- fragment --></li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="DCPS_QoS_Provider_Limitations"></a>
Known limitations       </h1>
<ul>
<li>Inheritance of QoS policies and QoS profiles in XML using the "base_name" attribute is not supported yet.</li>
<li>The "topic_filter" attribute for writer,reader, and topic QoSs to associate a set of topics to a specific QoS when that QoS is part of a DDS profile, is not supported yet.</li>
<li>All leading and trailing spaces should be removed from the string before it is processed. For example, "&lt;tag&gt; value &lt;/tag&gt;" should be the same as "&lt;tag&gt;value&lt;/tag&gt;"</li>
<li>Currently parsing of sequences and arrays only supports sequence of strings </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
